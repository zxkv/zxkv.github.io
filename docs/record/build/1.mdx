---
title: "Rspack é…ç½®"
author: "ä¸‹è½é¦™æ¨Ÿæ ‘"
---

# Rspack é…ç½®

### å‚è€ƒæ–‡æ¡£

[Rspack å®˜æ–¹æ–‡æ¡£](https://rspack.dev/zh/)ã€ŒğŸ‘ˆ ç‚¹å‡»æŸ¥é˜…ã€

åœ¨å‰ç«¯é¡¹ç›®ä¸­ï¼Œ`RSPack` æ˜¯ä¸€ä¸ªæ–°å…´çš„æ„å»ºå·¥å…·ï¼Œä¸ Webpack ç±»ä¼¼ï¼Œä½†å®ƒæ›´å¿«ä¸”åŸºäº Rust å¼€å‘ï¼Œé€‚åˆæ„å»ºç°ä»£å‰ç«¯åº”ç”¨ã€‚ä»¥ä¸‹æ˜¯ä¸€ä¸ªå…¸å‹çš„ RSPack é¡¹ç›®æ¶æ„é…ç½®çš„è¯¦ç»†æŒ‡å—ï¼Œå¸®åŠ©ä½ å¿«é€Ÿæ­å»ºå’Œé…ç½®ä¸€ä¸ª RSPack é¡¹ç›®æ¶æ„ã€‚

---

### 1. åˆå§‹åŒ–é¡¹ç›®

åœ¨å¼€å§‹é…ç½® RSPack ä¹‹å‰ï¼Œéœ€è¦å…ˆåˆå§‹åŒ–ä¸€ä¸ªé¡¹ç›®ã€‚

```bash
# åˆ›å»ºé¡¹ç›®ç›®å½•
mkdir rspack-project && cd rspack-project

# åˆå§‹åŒ– NPM é¡¹ç›®
npm init -y
```

---

### 2. å®‰è£… RSPack

å®‰è£… RSPack å’Œç›¸å…³ä¾èµ–ï¼š

```bash
# å®‰è£… RSPack å’Œ RSPack CLI
npm install --save-dev @rspack/core @rspack/cli
```

---

### 3. åˆ›å»ºé¡¹ç›®ç›®å½•ç»“æ„

é€šå¸¸çš„é¡¹ç›®ç›®å½•ç»“æ„å¦‚ä¸‹ï¼š

```
rspack-project/
â”œâ”€â”€ src/                # æºä»£ç ç›®å½•
â”‚   â”œâ”€â”€ index.js        # ä¸»å…¥å£æ–‡ä»¶
â”‚   â””â”€â”€ App.jsx         # ç¤ºä¾‹ç»„ä»¶
â”œâ”€â”€ dist/               # æ‰“åŒ…åçš„è¾“å‡ºç›®å½•
â”œâ”€â”€ package.json        # é¡¹ç›®é…ç½®æ–‡ä»¶
â”œâ”€â”€ rspack.config.js    # RSPack é…ç½®æ–‡ä»¶
â””â”€â”€ .babelrc            # Babel é…ç½®æ–‡ä»¶ï¼ˆå¦‚æœéœ€è¦ï¼‰
```

---

### 4. é…ç½® RSPack

åˆ›å»º `rspack.config.js` æ–‡ä»¶å¹¶æ·»åŠ ä»¥ä¸‹å†…å®¹ï¼š

```javascript
const path = require("path");

module.exports = {
	entry: "./src/index.js", // å…¥å£æ–‡ä»¶
	output: {
		path: path.resolve(__dirname, "dist"), // è¾“å‡ºç›®å½•
		filename: "bundle.js" // è¾“å‡ºçš„æ–‡ä»¶å
	},
	module: {
		rules: [
			{
				test: /\.jsx?$/, // åŒ¹é… JS å’Œ JSX æ–‡ä»¶
				exclude: /node_modules/,
				use: {
					loader: "babel-loader" // ä½¿ç”¨ Babel è½¬è¯‘
				}
			},
			{
				test: /\.css$/, // åŒ¹é… CSS æ–‡ä»¶
				use: ["style-loader", "css-loader"] // åŠ è½½ CSS
			},
			{
				test: /\.(png|jpe?g|gif|svg)$/, // åŒ¹é…å›¾ç‰‡æ–‡ä»¶
				type: "asset" // å¤„ç†èµ„æºæ–‡ä»¶
			}
		]
	},
	resolve: {
		extensions: [".js", ".jsx", ".json"] // è‡ªåŠ¨è§£æè¿™äº›æ‰©å±•
	},
	devServer: {
		static: {
			directory: path.join(__dirname, "dist") // å¼€å‘æœåŠ¡å™¨é™æ€æ–‡ä»¶ç›®å½•
		},
		compress: true, // å¯ç”¨ gzip å‹ç¼©
		port: 9000, // å¼€å‘æœåŠ¡å™¨ç«¯å£
		open: true // è‡ªåŠ¨æ‰“å¼€æµè§ˆå™¨
	},
	mode: "development" // å¼€å‘æ¨¡å¼
};
```

---

### 5. é…ç½® Babel

å¦‚æœé¡¹ç›®éœ€è¦ä½¿ç”¨ç°ä»£ JavaScript è¯­æ³•æˆ– Reactï¼Œåˆ™éœ€è¦é…ç½® Babelã€‚

å®‰è£…ç›¸å…³ä¾èµ–ï¼š

```bash
npm install --save-dev babel-loader @babel/core @babel/preset-env @babel/preset-react
```

åˆ›å»º `.babelrc` æ–‡ä»¶å¹¶æ·»åŠ ä»¥ä¸‹å†…å®¹ï¼š

```json
{
	"presets": ["@babel/preset-env", "@babel/preset-react"]
}
```

---

### 6. æ·»åŠ ä»£ç 

åœ¨ `src/` ç›®å½•ä¸­åˆ›å»ºä»¥ä¸‹æ–‡ä»¶ï¼š

**`src/index.js`**

```javascript
import React from "react";
import ReactDOM from "react-dom/client";
import App from "./App";
import "./styles.css";

const root = ReactDOM.createRoot(document.getElementById("root"));
root.render(<App />);
```

**`src/App.jsx`**

```javascript
import React from "react";

function App() {
	return (
		<div>
			<h1>Hello, RSPack!</h1>
		</div>
	);
}

export default App;
```

**`src/styles.css`**

```css
body {
	font-family: Arial, sans-serif;
	background-color: #f0f0f0;
	margin: 0;
	padding: 0;
}

h1 {
	color: #333;
	text-align: center;
	margin-top: 50px;
}
```

---

### 7. æ·»åŠ  HTML æ¨¡æ¿

åœ¨é¡¹ç›®æ ¹ç›®å½•ä¸‹åˆ›å»º `index.html`ï¼Œä½œä¸º Webpack æ‰“åŒ…çš„å…¥å£ HTML æ–‡ä»¶ï¼š

**`index.html`**

```html
<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<title>RSPack Project</title>
	</head>
	<body>
		<div id="root"></div>
		<script src="bundle.js"></script>
	</body>
</html>
```

---

### 8. å¯åŠ¨å¼€å‘æœåŠ¡å™¨

åœ¨ `package.json` ä¸­æ·»åŠ è„šæœ¬ï¼š

```json
"scripts": {
  "start": "rspack dev",
  "build": "rspack build"
}
```

å¯åŠ¨å¼€å‘æœåŠ¡å™¨ï¼š

```bash
npm start
```

---

### 9. æ„å»ºé¡¹ç›®

è¿è¡Œä»¥ä¸‹å‘½ä»¤æ„å»ºé¡¹ç›®ï¼š

```bash
npm run build
```

æ„å»ºå®Œæˆåï¼Œæ‰“åŒ…çš„æ–‡ä»¶å°†è¾“å‡ºåˆ° `dist/` ç›®å½•ã€‚

---

### 10. è¿›ä¸€æ­¥ä¼˜åŒ–

-   **ä½¿ç”¨æ’ä»¶**ï¼šæ ¹æ®éœ€æ±‚å¯ä»¥æ·»åŠ æ’ä»¶ï¼Œæ¯”å¦‚ HTML æ’ä»¶ã€å‹ç¼©æ’ä»¶ç­‰ã€‚
-   **ä»£ç åˆ†å‰²**ï¼šåˆ©ç”¨åŠ¨æ€å¯¼å…¥å’Œ RSPack çš„ä»£ç åˆ†å‰²åŠŸèƒ½ä¼˜åŒ–è¾“å‡ºæ–‡ä»¶å¤§å°ã€‚
-   **ç”Ÿäº§ç¯å¢ƒé…ç½®**ï¼šä¸ºç”Ÿäº§ç¯å¢ƒè®¾ç½® `mode: 'production'`ï¼Œå¯ç”¨ Tree-Shaking ç­‰ä¼˜åŒ–ã€‚

RSPack çš„é…ç½®å’Œç”¨æ³•ä¸ Webpack éå¸¸ç›¸ä¼¼ï¼Œä½†æ€§èƒ½æ›´ä¼˜ã€‚å¦‚æœä½ å·²ç»ç†Ÿæ‚‰ Webpackï¼Œè¿ç§»åˆ° RSPack ä¼šéå¸¸ç®€å•ï¼
